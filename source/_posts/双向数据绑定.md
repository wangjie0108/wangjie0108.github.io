---
title: 双向数据
date: 2018-10-05 14:58:02
categories: 
    - '前端'
    - Vue
tags: 
    - Vue
---
# 什么是vue.js
+ vue.js构建用户界面，**只关注视图层**；
+ 前端的主要工作：主要负责MVC中的V这一层
+ vue中，一个核心概念，就是让用户不再操作DOM元素，解放了用户的双手，让程序员可以更多的时间去关注业务逻辑
+ node(后端)中的MVC与前端中的MVVM之间的区别：
① MVC是后端的分层开发概念
② MVVM是前端图层的概念，主要关注于视图分层，也就是说，MVVM把前端的视图层分为了三部分：Model,View, ViewModel
③ M ->  保存的是每个页面中单独的数据
④ VM -> 是一个调度者，分割了M和V，每当V层想要获取后保存数据的时候，都要由VM坐中间的处理
⑤ V -> 每个页面中的HTML结构
⑥ 数据的双向绑定是由VM提供的；

# v-cloak 
+ 能够解决插值表达式闪烁问题，
`<p v-cloak>++++++ {{ msg }} ++------</p>`

# v-text 
+ 默认是没有闪烁问题的，
+ 会覆盖元素中原本的内容，差值表达式只会替换自己的占位符，不会把整个元素的内容清空
`<h4 v-text="msg">===========</h4>`

# v-html
+ 会覆盖元素中原本的内容，但是会把内容当做html解析放在页面中
`<h4 v-html="msg"></h4>`
`msg="<h1>我是一个大大的H1标题</h1>"`

# v-bind 
+ 是vue中提供的用于绑定属性的指令
+ 只能单向数据绑定，从M 自动绑定到 V
`<input type="button" value="按钮" v-bind:title="mytitle"></input>`
+ (v-bind:)的简写形式 只留一个冒号(:),形式 :要绑定的属性
`<input type="button" value="按钮" :title="mytitle"></input>`

# v-on
+ vue中提供了 v-on事件绑定机制
`<input type="button" value="按钮" v-on:click="show">`
+ v-on可以简写为： @click
`<input type="button" value="按钮" @click="show">`
``

# `v-for`
+ `v-for = "xxx in list"`
+ 注意：在使用v-for的时候，必须同时给元素指定一个key属性


# `v-if`
+ `v-if="条件判断（会转化为bool）"`
	- 成立：元素会在DOM结构中渲染
	- 不成立：该元素不会出现在dom树中

# v-show
+ `v-show="条件判断（转化为bool）"`
	- 成立：元素显示
	- 不成立：`display： none`


# `v-if` 与 `v-show`的区别：
+ `v-if`: 
    - 每次回删除或创建元素
	- 有较高的切换性能消耗
	- 控制的元素会从页面移除/添加
	- `v-if`如果和`v-for`一起使用，每次循环都会判断一次
	- v-if成立，元素会在DOM结构中渲染
+ `v-show`：
    - 每次不会重新进行`DOM`的删除和创建操作，只是切换了元素的`display：none`样式
	- 有较高的初始渲染消耗
	- 如果元素涉及到频繁的切换，使用v-show
	- 控制的元素会从页面显示/隐藏

# 事件修饰符
+ `.stop`：阻止冒泡
`<input type="button" value="戳他" @click.stop="btnClick">`

+ `.prevent` : 阻止默认事件
`<a href="http://www.baidu.com" @click.prevent="linkClick">有问题，先去百度</a>`
+ `.capture` 捕获模式执行事件（从外向内）
+ `.self` 事件在本身触发时触发回调
    比如：.self只会阻止 div2 身上的事件冒泡
    ```javascript
    <div class="outer" @click.self="div2">
        <div class="inner" @click="div1">
        </div>
    </div>
    ```
+ `.once `事件只触发一次

# 自定义修饰符
`vue.config.keyCodes.名称 = 按键值`
如： `Vue.config.keyCodes.f2 = 113`

# 使用class样式
1. 数组
`<h1 :class="['red', 'thin']">纯洁的H1表达式</h1>`
2. 数组中使用三元表达式
`<h1 :class=['red', 'thin', isactive ? 'active' : '']>复杂的H1表达式</h1>`
3. 数组中嵌套对象
`<h1 :class="['red', 'thin', { 'active': isactive }]">这是一个邪恶的H1</h1>`
4. 直接使用对象（使用v-bind绑定对象，对象的属性是类名，对象的属性可以带引号，也可以不带引号）
`<h1 :class="{ pink:true, italic: true, active: true }">这是一个善良的H1，真的，别不信</h1>`


# v-model双向数据绑定的原理及特点
+ 原理：利用`Object.defineProperty()`这个方法重新定义对象获取属性值（`get`）和设置属性值（`set`）的操作实现的
+ 特点：`v-model`指令只能作用在表单元素上
```javascript
 <body>
 	<!-- vue双向数据绑定的原理 -->
    <input type="text" id="myInput">
    <span id="mySpan" ></span>
  </body>  
    <script>
        var data = {
            msg:'哈哈哈哈哈'
        }

        myInput.value = data.msg;
        mySpan.innerText = data.msg;
        
        // VUE中双向数据绑定的原理 就是 Object.defineProperty
        // 参数1 对象
        // 参数2 对象中需要定义的属性
        // 参数3 该属性的一些配置
        Object.defineProperty(data,'msg',{
            get:function(){
                return myInput.value;
            },
            set:function(newValue){
                myInput.value = newValue;
                mySpan.innerText = newValue;
            }
        })

        myInput.onkeyup = function(){
            data.msg = this.value;
            console.log(data.msg)
        }

        // var str = data.msg // 读取msg的值 ----> get
        // data.msg = xxxx // 设置msg的值 -----> set
    </script>
```
![双向数据绑定](/img/双向数据绑定.png)